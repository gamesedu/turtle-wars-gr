<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="turtle-wars.css"></link>
    <script src="turtle-lang.js"></script>
    <script src="turtle-game.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
      $(function () {
          var game = null;
          $("#fightbtn").click(function () {
              if (game !== null) {
                  game.stop();
                  game = null;
              }
              var canvas = $("canvas#field").get(0);

              var brown = new turtle_game.Turtle("brown", $('#turtle1 textarea').val(), 'rgb(80,40,0)');
              brown.x = brown.r * 2;
              brown.y = brown.r * 2;
              brown.h = Math.random() * 2 * Math.PI;

              var green = new turtle_game.Turtle("green", $('#turtle2 textarea').val(), 'rgb(0,128,0)');
              green.x = canvas.width - green.r * 2;
              green.y = canvas.height - green.r * 2;
              green.h = Math.random() * 2 * Math.PI;

              game = new turtle_game.Game([brown, green], canvas);
              game.start();
          });
      });
    </script>
  </head>
  <body>
    <div id="arena">
      <h1>turtle wars
        <button id="fightbtn">Fight!</button>
        <a href="https://github.com/jorendorff/turtle-wars/">readme/forkme</a></h1>
      <canvas id="field" width="800" height="600"></canvas>
    </div>
    <div id="turtle1">
      <textarea id="brown" cols="100" rows="40"
>forever {
    fd 10,
    rt 2,
    if (lt? (tail (look 0 90)) 50) {rt 20} {!},
    shoot!
}
      </textarea>
    </div>
    <div id="turtle2">
      <textarea id="green" cols="100" rows="40"
>forever {
    while { eq? (head (look 0 5)) 1 } {rt 3},
    rt 2,
    shoot!,
    fd 25
}
</textarea>
    </div>
  </body>
</html>
